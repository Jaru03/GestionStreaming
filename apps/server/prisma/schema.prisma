// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider     = "prisma-client"
  output       = "../generated/prisma"
  moduleFormat = "cjs"
}

datasource db {
  provider = "postgresql"
}

model Client {
  clientId Int @id @default(autoincrement())
  name String
  lastName String
  phone String

  subscriptions Subscription[]
}

model Service {
  serviceId Int @id @default(autoincrement())
  name String
  price Float

  accounts Account[]
}

model Account {
  accountId Int @id @default(autoincrement())
  serviceId Int
  email String
  password String

  service Service @relation(fields: [serviceId], references: [serviceId])
  screens Screen[]
  subscriptions Subscription[]
}

model Screen {
  screenId Int @id @default(autoincrement())
  accountId Int
  name String
  pin String?

  account Account @relation(fields: [accountId], references: [accountId])
}

model Subscription {
  subscriptionId Int @id @default(autoincrement())
  clientId Int
  accountId Int
  startDate DateTime @default(now())
  endDate DateTime?

  client Client @relation(fields: [clientId], references: [clientId])
  account Account @relation(fields: [accountId], references: [accountId])
}
